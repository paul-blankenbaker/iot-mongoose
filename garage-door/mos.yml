author: Paul Blankenbaker
description: Experiment with Mongoose OS to create a Web based garage door opener
version: 1.0
platform: esp32

libs_version: ${mos.version}
modules_version: ${mos.version}
mongoose_os_version: ${mos.version}

# Optional. List of tags for online search.
tags:
  - js
  - garage door
  - websocket
  - http

# List of files / directories with C sources.
#sources:
#  - src

# List of dirs to copy files to top level of device file system
# (not a recursive copy - no sub-directories in build)
filesystem:
  - fs

# Configurable settings used by this application. It is recommended
# that you create a fs/conf1.json file prior to building your firmware
# to set reasonable defaults for your hardware (see conf1.template.json
# for a starting point)
config_schema:
  - ["app", "o", {title: "Garage Door Opener"}]
  - ["app.relayPin", "i", 13, {title: "GPIO pin attached to relay"}]
  - ["app.relayUpState", "b", false, {title: "State for pin to keep the relay open (unpressed)"}]
  - ["app.relayDownMsecs", "i", 200, {title: "How many milliseconds to close the relay for to simulate a garage door press"}]
  - ["app.dhtPin", "i", -1, {title: "GPIO pin attached to DHT-22 sensor or -1 if no sensor connected"}]
  - ["app.msecsBetweenReadings", "i", 2000, {title: "Number of milliseconds between each DHT-22 temperature/humidity reading"}]
  - ["app.temperatureTolerance", "d", 0.25, {title: "Maximum change between subsequent temperature readings"}]
  - ["app.humidityTolerance", "d", 0.5, {title: "Maximum change between subsequent humidity readings"}]
  - ["mqtt.enable", "b", false, { title: "Set to true if you want to post JSON status to MQTT server"}]
  - ["mqtt.server", "s", "127.0.0.1", { title: "IP address or host name of MQTT server to post MQTT JSON status message to"}]
  - ["mqtt.topic", "s", "environment/garage", { title: "The topic to post status information under" }]
  - ["mqtt.msecsBetweenPosts", "i", 60000, { title: "Milliseconds between posts of JSON status to MQTT server" }]

libs:
  - origin: https://github.com/mongoose-os-libs/js-demo-bundle

# Used by the mos tool to catch mos binaries incompatible with this file format
manifest_version: 2017-09-29
